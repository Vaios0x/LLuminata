# ========================================
# CONFIGURACIÓN DEL SISTEMA DE ANALYTICS
# ========================================
# Copia este archivo como .env.local y configura tus valores

# ========================================
# GOOGLE ANALYTICS 4
# ========================================
# ID de Google Analytics 4 (obligatorio)
# Formato: G-XXXXXXXXXX
NEXT_PUBLIC_GA_ID="G-XXXXXXXXXX"

# ========================================
# REDIS CACHE
# ========================================
# Configuración de Redis para caché de analytics
REDIS_HOST="localhost"
REDIS_PORT="6379"
REDIS_PASSWORD=""
REDIS_DB="0"
REDIS_URL="redis://localhost:6379"

# Configuración de caché para analytics
ANALYTICS_CACHE_TTL="900"           # 15 minutos en segundos
PROGRESS_CACHE_TTL="1800"           # 30 minutos en segundos
ENGAGEMENT_CACHE_TTL="3600"         # 1 hora en segundos
ADMIN_CACHE_TTL="300"               # 5 minutos en segundos

# ========================================
# BASE DE DATOS
# ========================================
# URLs de conexión a PostgreSQL
DATABASE_URL="postgresql://username:password@localhost:5432/inclusive_ai_coach"
DIRECT_URL="postgresql://username:password@localhost:5432/inclusive_ai_coach"

# ========================================
# CONFIGURACIÓN DE ANALYTICS
# ========================================
# Habilitar/deshabilitar características
ANALYTICS_ENABLED="true"
ANALYTICS_DEBUG="false"
ANALYTICS_ANONYMIZE_IP="true"
ANALYTICS_RESPECT_DNT="true"
ANALYTICS_COOKIE_CONSENT="true"

# Configuración de eventos
ANALYTICS_TRACK_PAGE_VIEWS="true"
ANALYTICS_TRACK_USER_INTERACTIONS="true"
ANALYTICS_TRACK_ERRORS="true"
ANALYTICS_TRACK_PERFORMANCE="true"
ANALYTICS_TRACK_ACCESSIBILITY="true"
ANALYTICS_TRACK_OFFLINE="true"

# Configuración de reportes
ANALYTICS_REPORT_RETENTION_DAYS="90"
ANALYTICS_MAX_EVENTS_PER_REQUEST="1000"
ANALYTICS_BATCH_SIZE="100"

# ========================================
# SEGURIDAD Y RATE LIMITING
# ========================================
# Rate limiting para API de analytics
ANALYTICS_RATE_LIMIT_REQUESTS="1000"    # Requests por hora
ANALYTICS_RATE_LIMIT_WINDOW="3600"      # Ventana en segundos
ANALYTICS_RATE_LIMIT_BURST="100"        # Burst máximo

# Configuración de auditoría
ANALYTICS_AUDIT_ENABLED="true"
ANALYTICS_AUDIT_LOG_LEVEL="info"
ANALYTICS_AUDIT_RETENTION_DAYS="30"

# ========================================
# MONITORING Y ALERTAS
# ========================================
# Configuración de alertas
ANALYTICS_ALERT_HIGH_ERROR_RATE="0.05"      # 5% de tasa de error
ANALYTICS_ALERT_LOW_ENGAGEMENT="0.3"        # 30% de engagement mínimo
ANALYTICS_ALERT_PERFORMANCE_THRESHOLD="2000" # 2 segundos de latencia

# Configuración de monitoreo
ANALYTICS_MONITORING_ENABLED="true"
ANALYTICS_MONITORING_INTERVAL="60000"       # 1 minuto en ms
ANALYTICS_MONITORING_TIMEOUT="5000"         # 5 segundos timeout

# ========================================
# DESARROLLO Y TESTING
# ========================================
# Configuración para desarrollo
NODE_ENV="development"
ANALYTICS_MOCK_DATA="true"              # Generar datos de prueba
ANALYTICS_DRY_RUN="false"               # No enviar eventos reales
ANALYTICS_LOG_LEVEL="debug"             # Nivel de logging

# Configuración de testing
ANALYTICS_TEST_MODE="false"
ANALYTICS_TEST_USER_ID="test-user-123"
ANALYTICS_TEST_SESSION_ID="test-session-456"

# ========================================
# OPTIMIZACIÓN Y PERFORMANCE
# ========================================
# Configuración de compresión
ANALYTICS_COMPRESSION_ENABLED="true"
ANALYTICS_COMPRESSION_THRESHOLD="1024"      # 1KB mínimo
ANALYTICS_COMPRESSION_LEVEL="6"             # Nivel de compresión

# Configuración de caché
ANALYTICS_CACHE_ENABLED="true"
ANALYTICS_CACHE_MAX_SIZE="100"              # MB
ANALYTICS_CACHE_CLEANUP_INTERVAL="3600000"  # 1 hora en ms

# Configuración de batch processing
ANALYTICS_BATCH_ENABLED="true"
ANALYTICS_BATCH_INTERVAL="5000"             # 5 segundos
ANALYTICS_BATCH_MAX_SIZE="50"               # Eventos por batch

# ========================================
# INTEGRACIÓN CON OTROS SERVICIOS
# ========================================
# Sentry para error tracking
SENTRY_DSN=""
SENTRY_ENVIRONMENT="development"

# Logging service
LOG_LEVEL="info"
LOG_FORMAT="json"

# ========================================
# CONFIGURACIÓN ESPECÍFICA DE PLATAFORMA
# ========================================
# Configuración para PWA
PWA_ENABLED="true"
PWA_ANALYTICS_OFFLINE="true"

# Configuración para mobile
MOBILE_ANALYTICS_ENABLED="true"
MOBILE_ANALYTICS_BATTERY_OPTIMIZATION="true"

# ========================================
# CONFIGURACIÓN DE PRIVACIDAD
# ========================================
# Configuración GDPR
GDPR_ENABLED="true"
GDPR_CONSENT_REQUIRED="true"
GDPR_DATA_RETENTION_DAYS="730"              # 2 años

# Configuración de anonimización
ANALYTICS_ANONYMIZE_USER_IDS="false"
ANALYTICS_ANONYMIZE_SESSION_IDS="false"
ANALYTICS_ANONYMIZE_IP_ADDRESSES="true"

# ========================================
# CONFIGURACIÓN DE EXPORTACIÓN
# ========================================
# Configuración para exportación de datos
ANALYTICS_EXPORT_ENABLED="true"
ANALYTICS_EXPORT_MAX_RECORDS="10000"
ANALYTICS_EXPORT_FORMATS="json,csv,xlsx"

# ========================================
# CONFIGURACIÓN DE BACKUP
# ========================================
# Configuración de backup automático
ANALYTICS_BACKUP_ENABLED="true"
ANALYTICS_BACKUP_INTERVAL="86400000"        # 24 horas en ms
ANALYTICS_BACKUP_RETENTION_DAYS="30"

# ========================================
# CONFIGURACIÓN DE MANTENIMIENTO
# ========================================
# Configuración de limpieza automática
ANALYTICS_CLEANUP_ENABLED="true"
ANALYTICS_CLEANUP_INTERVAL="604800000"      # 1 semana en ms
ANALYTICS_CLEANUP_OLD_EVENTS_DAYS="90"

# ========================================
# CONFIGURACIÓN DE DESPLIEGUE
# ========================================
# URLs de producción
NEXT_PUBLIC_APP_URL="https://lluminata.com"
NEXT_PUBLIC_API_URL="https://api.lluminata.com"

# Configuración de CORS
ANALYTICS_CORS_ORIGINS="https://lluminata.com,https://www.lluminata.com"

# ========================================
# CONFIGURACIÓN DE ESCALABILIDAD
# ========================================
# Configuración de workers
ANALYTICS_WORKERS_ENABLED="false"
ANALYTICS_WORKERS_COUNT="2"

# Configuración de clustering
ANALYTICS_CLUSTER_ENABLED="false"
ANALYTICS_CLUSTER_WORKERS="4"

# ========================================
# CONFIGURACIÓN DE MONITORING AVANZADO
# ========================================
# Health checks
ANALYTICS_HEALTH_CHECK_ENABLED="true"
ANALYTICS_HEALTH_CHECK_INTERVAL="300000"    # 5 minutos
ANALYTICS_HEALTH_CHECK_TIMEOUT="5000"       # 5 segundos

# Métricas de sistema
ANALYTICS_SYSTEM_METRICS_ENABLED="true"
ANALYTICS_SYSTEM_METRICS_INTERVAL="60000"   # 1 minuto

# ========================================
# CONFIGURACIÓN DE DESARROLLO LOCAL
# ========================================
# Para desarrollo local, puedes usar estos valores:
# NEXT_PUBLIC_GA_ID="G-DEVELOPMENT"
# REDIS_HOST="localhost"
# REDIS_PORT="6379"
# DATABASE_URL="postgresql://postgres:password@localhost:5432/inclusive_ai_coach_dev"
# DIRECT_URL="postgresql://postgres:password@localhost:5432/inclusive_ai_coach_dev"

# ========================================
# INSTRUCCIONES DE USO
# ========================================
# 1. Copia este archivo como .env.local
# 2. Configura las variables según tu entorno
# 3. Asegúrate de que Redis esté corriendo
# 4. Ejecuta: npm run analytics:setup
# 5. Verifica: npm run analytics:check
# 6. Inicia: npm run dev

# ========================================
# NOTAS IMPORTANTES
# ========================================
# - NEXT_PUBLIC_GA_ID es obligatorio para GA4
# - REDIS es requerido para el caché
# - DATABASE_URL debe apuntar a PostgreSQL
# - En producción, usa valores seguros
# - Revisa la documentación en docs/ANALYTICS.md
